{% set classes = ['accordion'] %}

{% if expanded %}
  {% set classes = classes|merge(['accordion--expanded']) %}
{% endif %}

{% if borderless %}
  {% set classes = classes|merge(['accordion--borderless']) %}
{% endif %}

{% set heading_classes = ['accordion__heading'] %}
{% if heading_style %}
  {% set heading_classes = heading_classes|merge(["heading", "heading--" ~ heading_style])%}
{% endif %}

<div class="{{ classes|join(' ') }}" data-interactive-component>
  {% if heading_level %}
    <{{ heading_level }} class="{{ heading_classes|join(' ') }}">
  {% endif %}
  <button class="accordion__button" aria-expanded="{{ expanded ? 'true' : 'false' }}" aria-controls="{{ id }}">
    {% set accordion_label_classes = ['accordion__label'] %}
    {% if label_underline %}
      {% set accordion_label_classes = accordion_label_classes|merge(['accordion__label--label-underline']) %}
    {% endif %}

    <span class="{{ accordion_label_classes|join(' ') }}">{{ label }}</span>
    <span class="accordion__sprite">
      {% include '@atoms/sprite/sprite.twig' with { name: 'fas-plus'} only %}
    </span>
  </button>
  {% if heading_level %}
    </{{ heading_level }}>
  {% endif %}

  {% set expandable_content_classes = ['accordion__expandable-content'] %}
  {% if indent_content %}
    {% set expandable_content_classes = expandable_content_classes|merge(['accordion__expandable-content--indent-content']) %}
  {% endif %}

  <div class="{{ expandable_content_classes|join(' ') }}" id="{{ id }}" {% if not expanded %} style="height:0; overflow:hidden"{% endif %}>
    {{ expandable_content }}
  </div>
</div>
