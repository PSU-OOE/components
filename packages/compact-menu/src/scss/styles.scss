@import '../../../base/src/scss/imports/variables';
@import '../../../base/src/scss/imports/layout';

:root {
  --compact-menu-icon-color--light: var(--pugh-blue);
  --compact-menu-text-color--light: var(--white);
  --compact-menu-icon-hover-color--light: var(--white);
  --compact-menu-icon-active-color--light: var(--keystone);

  --compact-menu-icon-color--dark: var(--pa-link);
  --compact-menu-text-color--dark: var(--beaver-blue);
  --compact-menu-icon-active-color--dark: var(--sky-blue);
  --compact-menu-icon-hover-color--dark: var(--beaver-blue);
}

:root, [data-light] {
  --compact-menu-icon-color: var(--compact-menu-icon-color--dark);
  --compact-menu-text-color: var(--compact-menu-text-color--dark);
  --compact-menu-icon-hover-color: var(--compact-menu-icon-hover-color--dark);
  --compact-menu-icon-active-color: var(--compact-menu-icon-active-color--dark);
}

[data-dark] {
  --compact-menu-icon-color: var(--compact-menu-icon-color--light);
  --compact-menu-text-color: var(--compact-menu-text-color--light);
  --compact-menu-icon-hover-color: var(--compact-menu-icon-hover-color--light);
  --compact-menu-icon-active-color: var(--compact-menu-icon-active-color--light);
}

.compact-menu {
  display: flex;
  &__toggle {
    display: flex;
    justify-content: center;
    align-items: center;
    line-height: var(--line-height--nospace);

    &:is(:focus-visible > .compact-menu__toggle) {
      outline: _rem(.2) solid var(--focus-indicator-color);
      outline-offset: _rem(.2);
    }

    &:where(:hover) &-sprite {
      color: var(--compact-menu-icon-hover-color);
    }

    &:hover &-label {
      text-decoration-color: var(--compact-menu-text-color);
    }

    &-sprite {
      color: var(--compact-menu-icon-color);
      transition: color var(--transition-duration--default) linear;

      &:is([aria-expanded="true"] > .compact-menu__toggle > .compact-menu__toggle-sprite) {
        color: var(--compact-menu-icon-active-color);
      }
    }

    &-label {
      color: var(--compact-menu-text-color);
      display: block;
      font-family: var(--font-family--default);
      font-weight: var(--font-weight--semibold);
      font-size: var(--font-size--5xsmall);
      text-decoration-color: transparent;
      text-decoration-line: underline;
      text-decoration-thickness: _rem(.1);
      text-underline-offset: .2em;
      transition: text-decoration-color var(--transition-duration--default) linear;

      &:is(:focus-visible  > .compact-menu__toggle > .compact-menu__toggle-label) {
        text-decoration-color: var(--compact-menu-icon-active-color);
      }
    }

    &--vertical {
      flex-direction: column;
      gap: _rem(.5);

      @include bp(xs) {
        gap: _rem(.7);
      }

      .compact-menu__toggle-sprite .sprite {
        width: _rem(2.1);
        height: auto;

        @include bp(xs) {
          width: _rem(2.6);
        }
      }

      .compact-menu__toggle-label {
        padding-bottom: .2em;

        @include bp(xs) {
          font-size: var(--font-size--3xsmall);
        }
      }
    }

    &--horizontal {
      flex-direction: row-reverse;
      gap: _rem(.6);

      .compact-menu__toggle-sprite .sprite {
        width: _rem(1.6);
        height: auto;
        vertical-align: _rem(-.2);
      }

      .compact-menu__toggle-label {
        font-size: var(--font-size--xsmall);

        @include bp(xl) {
          font-size: var(--font-size--msmall);
        }
      }
    }
  }

  &__content {
    padding: _rem(1) _rem(2) _rem(3) _rem(2);
  }
}
