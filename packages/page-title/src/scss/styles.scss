@import '../../../base/src/scss/imports/variables';
@import '../../../base/src/scss/imports/layout';

.page-title {
  overflow: hidden;
  position: relative;

  &--image {
    @include bp(m) {
      height: _rem(40);
    }
  }

  &__background {
    &--image {
      position: relative;

      @include bp(m) {
        position: absolute;
        inset: 0;
      }
    }

    &--no-image {
      position: absolute;
      inset: 0;

      background-color: var(--light-grey);
    }
  }

  &__geometrics {
    position: absolute;
    inset: 0;
    overflow: hidden;
    opacity: .5;

    &--image {
      top: _rem(-2);
      left: calc(50% - _rem(173.6));
      mix-blend-mode: overlay;

      // Two sprites are used to form the page title (with image) geometrics
      // design.  Since the element that provides the gradient occupies the
      // :first-child position in the geometrics container, the sprites occupy
      // the second and third positions.
      .sprite {
        color: var(--white);
        position: absolute;
        width: _rem(67);
        height: auto;

        &:nth-child(2) {
          left: 0;
        }

        &:nth-child(3) {
          // The design calls for a white to transparent linear gradient from
          // left to right on the geometric lines. The hub geometric sprite has
          // an API that takes an optional fill property, so we can apply this
          // unique gradient, tightly scoped to this particular context.
          //
          // @see https://github.com/PSU-OOE/components/blob/bleeding-edge-headers/packages/sprite/src/assets/hub-geometric.svg
          --hub-geometric-gradient: url(#hub-geometric-page-title-image-gradient);

          left: _rem(66.8);
        }
      }
    }

    &--no-image {
      .sprite {
        &:nth-child(2) {
          // The design calls for a white to transparent linear gradient from
          // left to right on the geometric lines. The hub geometric sprite has
          // an API that takes an optional fill property, so we can apply this
          // unique gradient, tightly scoped to this particular context.
          //
          // @see https://github.com/PSU-OOE/components/blob/bleeding-edge-headers/packages/sprite/src/assets/hub-geometric.svg
          --hub-geometric-gradient: url(#hub-geometric-page-title-no-image-gradient);

          position: absolute;
          top: _rem(-34);
          left: calc(50% + _rem(22));
          width: _rem(67);
          height: auto;

        }
      }
    }
  }

  &__gradient {
    &::before {
      position: absolute;
      content: "";
      inset: calc(100% - 8rem) 0 0 0;
      background: linear-gradient(to bottom, transparent, var(--nittany-navy));

      @include bp(m) {
        display:block;
        left: calc(50% - 1260px);
        top: -80px;
        width: 1750px;
        height: 840px;
        transform: rotate(17deg);
        background: radial-gradient(closest-side, var(--nittany-navy), transparent);
        mix-blend-mode: multiply;
      }
    }

    &::after {
      @include bp(m) {
        content: "";
        position: absolute;
        width: 10000px;
        left: calc(50% - 5000px);
        top: 0;
        bottom:0;
        background: linear-gradient(22deg, var(--nittany-navy) 41%, transparent 50%);
      }
    }
  }

  &__background img {

    @include bp(m) {
      position: absolute;
      object-fit: cover;
      object-position: top center;
      height: 100%;
      width: 100%;
      inset: 0;
    }
  }

  &__content {
    position: relative;
    margin: auto;
    max-width: _rem(119);
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    height: 100%;

    &--image {
      background: var(--nittany-navy);
      padding: 0 var(--page-side-padding) _rem(4.5) var(--page-side-padding);

      @include bp(m) {
        padding: _rem(8) var(--page-side-padding) _rem(4.5) var(--page-side-padding);
      }

      @include bp(m) {
        background: transparent;
      }
    }

    &--no-image {
      padding: _rem(6) _rem(4) _rem(3) var(--page-side-padding);

      @include bp(m) {
        padding-top: _rem(8);
        padding-right: _rem(16);
      }
    }
  }

  &__heading {
    position: relative;
    display: flex;
    flex-direction: column;
    margin-bottom: 0;

    &--reversed {
      color: var(--white);
      text-shadow: var(--nittany-navy) 0 0 _rem(.6);

      @include bp(m) {
        max-width: _rem(50);
      }
    }
  }

  &__subtitle-before,
  &__subtitle-after {
    font-size: var(--font-size--xlarge);
    line-height: var(--line-height--2xsnug);
  }
}
